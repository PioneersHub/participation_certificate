{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"\ud83c\udfa8 Design &amp; \ud83d\udea2 Ship \ud83d\udcdc PDFs","text":"<p>Create signed, secure PDFs easy to validate.</p> <p>This is a boilerplate repository.</p> What does that mean? signed PDFs are digitally signed and cannot be altered secure disallow features like copying text, altering validated via a website A link to your website to confirm the authenticity <p>The PDFs that can be used e.g., for</p> <ul> <li>issuing certificates of attendance for a conference</li> <li>issuing certificates of participation or a training</li> <li>vouchers</li> <li>\u2026</li> </ul> <p>This repo will be help you with the generation of the certificates but does require:</p> <ul> <li>Code to mangle/ prepare the data to be displayed on the certificate</li> <li>Configuration to create the layout of the PDF</li> <li>Generation of a personal PKCS12 certificate to sign the PDFs</li> <li>Customizing the upload script to fit your own website</li> <li>Customizing the delivery email script</li> </ul> <p>Main library used: fpdf2</p> <p>Sample PDF </p> <p>Sample Website for Validation </p>"},{"location":"#four-step-process","title":"\u2b50\ufe0f Four-Step Process","text":"<ol> <li>Prepare data to be included in the certificate</li> <li>Generate PDF certificates</li> <li>Upload PDF certificates to the website</li> <li>Send emails to notify recipients</li> </ol> <p>Each step should be run separately for review of intermediate results.</p>"},{"location":"#realization","title":"Realization","text":"<p>Pioneers Hub helps to build and maintain thriving communities of experts in tech and research to share knowledge, collaborate and innovate together. </p>"},{"location":"bestpractice/","title":"Best Practices","text":""},{"location":"bestpractice/#tipps-and-best-practices","title":"Tipps and Best Practices.","text":""},{"location":"bestpractice/#designing-the-certificate-layouting","title":"Designing the Certificate: Layouting","text":"<p>The layout is created by drawing elements on a canvas. Elements are placed on the canvas by assigning them coordinates. This can be time-intensive and try-and-error.</p> <p>Design a layout, save it as background in the beginning and place elements accordingly.</p>"},{"location":"bestpractice/#designing-the-certificate-elements","title":"Designing the Certificate: Elements","text":"<p>Adding new elements will add them on top of existing elements at the coordinates.</p> <p>Consider there is a header and footer section in the document canvas by default. To content or change these sections one needs to overwrite the <code>header</code> and <code>footer</code> methods:</p> <pre><code># create and use a new class that inherits from FPDF\nclass PDF(FPDF):\n    def header(self):\n        pass  # do your stuff\n\n    def footer(self):\n        pass  # do your stuff\n</code></pre>"},{"location":"bestpractice/#design-vs-signing-and-encryption","title":"Design vs. Signing and Encryption","text":"<p>A convenient way to design certificates is use to a PDF with a generic layout (e.g., designed in a design application), create a new PDF with the individual information and merge both to a new PDF.</p> <p>See Adding content onto an existing PDF page</p> <p>Downside: PDF created this way can not be signed or encrypted.</p>"},{"location":"bestpractice/#markdown-in-text-for-pdfs","title":"Markdown in text for PDFs","text":"<p>You can use markdown in the text for the PDFs. Make sure to load fonts for bold and italic text like:</p> <p>regular-text-font-name, typeface, path-to-font-file, e.g.,</p> <pre><code>fpdf.add_font(\"poppins-regular\", \"B\", font.parents[1] / \"Poppins/Poppins-Bold.ttf\")\n</code></pre>"},{"location":"installation/","title":"Installation","text":""},{"location":"installation/#environment","title":"Environment","text":"<p>This project uses uv for package management. uv is a fast Python package and project manager that supports Windows, MacOS, and Linux.</p>"},{"location":"installation/#install-uv","title":"Install uv","text":"<pre><code># On macOS and Linux\ncurl -LsSf https://astral.sh/uv/install.sh | sh\n\n# On Windows\npowershell -c \"irm https://astral.sh/uv/install.ps1 | iex\"\n\n# Or with pip\npip install uv\n</code></pre>"},{"location":"installation/#setup-the-project","title":"Setup the Project","text":"<p>To install the environment, run the following commands from the project root directory:</p> <pre><code># Create virtual environment\nuv venv\n\n# Activate the environment\n# On macOS/Linux:\nsource .venv/bin/activate\n# On Windows:\n.venv\\Scripts\\activate\n\n# Install the project in editable mode with all dependencies\nuv pip install -e \".[dev,docs,build]\"\n\n# Or install from requirements files\nuv pip install -r requirements.txt\nuv pip install -r requirements-dev.txt\n</code></pre>"},{"location":"installation/#documentation","title":"Documentation","text":""},{"location":"installation/#preview","title":"Preview","text":"<p>Run <pre><code>mkdocs serve\n</code></pre> to start the live-reloading docs server.</p> <p>The local website is run on http://127.0.0.1:8000/participation_certificate/</p> <p>MacOS-Error</p> <p>no library called \"cairo-2\" was found\u2026</p> <p>can be fixed with: <pre><code>export DYLD_FALLBACK_LIBRARY_PATH=/opt/homebrew/lib\nmkdocs serve\n</code></pre> See here for details</p>"},{"location":"installation/#publishing","title":"Publishing","text":"<p>The documentation website is hosted at GitHub pages.</p> <p>To deploy: <pre><code>mkdocs gh-deploy\n</code></pre></p> <p>MacOS-Error</p> <p>no library called \"cairo-2\" was found\u2026</p> <p>can be fixed with: <pre><code>export DYLD_FALLBACK_LIBRARY_PATH=/opt/homebrew/lib\nmkdocs gh-deploy\n</code></pre></p> <p>before running <code>mkdocs gh-deploy</code> to install the cairo library.</p>"},{"location":"installation/#versioning-schema","title":"Versioning Schema","text":"<p>The versioning schema is <code>{major}.{minor}.{patch}[{release}{build}]</code> where the latter part (release and build) is optional.</p> <p>It is recommended to do <code>--dry-run</code> prior to your actual run.</p> <pre><code># increase version identifier\nbumpversion [major/minor/patch/release/build]  # --verbose --dry-run\n\n# e.g.\nbumpversion minor  # e.g. 0.5.1 --&gt; 0.6.0\nbumpversion minor --new-version 0.7.0  # e.g. 0.5.1 --&gt; 0.7.0\n</code></pre>"},{"location":"license/","title":"License","text":"<p>BSD 3-Clause License</p> <p>Copyright (c) 2024 Pioneers Hub gemeinn\u00fctzige GmbH (non-profit)</p> <p>Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</p> <ol> <li> <p>Redistributions of source code must retain the above copyright notice, this    list of conditions and the following disclaimer.</p> </li> <li> <p>Redistributions in binary form must reproduce the above copyright notice,    this list of conditions and the following disclaimer in the documentation    and/or other materials provided with the distribution.</p> </li> <li> <p>Neither the name of the copyright holder nor the names of its    contributors may be used to endorse or promote products derived from    this software without specific prior written permission.</p> </li> </ol> <p>THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</p> <p>RESTRICTED LICENSE FOR COMPANY LOGO</p> <p>The \"Pioneers Hub\" logo, as provided in this repository (the \u201cLogo\u201d), is the exclusive property of Pioneers Hub gGmbH. By using the Logo, you agree to the following terms:</p> <ol> <li>Permitted Use:     You are allowed to use the Logo only for purposes related to promoting Pioneers Hub\u2019s official projects or repositories.     You must give appropriate credit to Pioneers Hub when using the Logo in any form.</li> <li>Prohibited Use:     You are not allowed to use the Logo for any commercial purposes without prior written permission from Pioneers Hub.     You cannot modify, distort, or alter the Logo in any way that could cause confusion or misrepresentation of Pioneers Hub.     The Logo may not be used in any way that suggests endorsement by Pioneers Hub of any other product, service, or entity unless expressly permitted in writing.</li> <li>Redistribution:     You are not permitted to redistribute the Logo, either on its own or as part of any other project or product, without prior written consent from Pioneers Hub.</li> <li>Termination of Use:     Pioneers Hub reserves the right to request the removal or alteration of the Logo\u2019s use at any time for any reason. Upon such a request, you must comply immediately.</li> <li>Ownership:     The Logo is protected by copyright, trademark, and other applicable laws. Use of the Logo does not grant any ownership or rights over the Logo to you or any other third party.</li> </ol>"},{"location":"walkthrough/","title":"Walkthrough","text":""},{"location":"walkthrough/#walkthrough-example","title":"\ud83c\udfed Walkthrough Example","text":"<p>Certificate of Attendance for a Conference</p> <p>We want to create certificates for attendees of the \"PyCon DE &amp; PyData Berlin 2024\" conference. We have a list of all tickets sold including the names of the participants.</p>"},{"location":"walkthrough/#0-configuration","title":"0. Configuration","text":"<p>Configuration is done in the <code>config.yaml</code> and <code>config_local.yaml</code> files. Any key in <code>config_local.yaml</code> will overwrite the key in <code>config.yaml</code>.</p> <p>Use <code>config_local.yaml</code> for your local settings, do not change <code>config.yaml</code>.</p>"},{"location":"walkthrough/#1-prepare-attendees-data","title":"1. Prepare attendees' data","text":"<p>Preprocess data: per certificate create one <code>Attendee</code>  instance. <code>Attendee</code> is a pydantic model.</p> <pre><code># noinspection PyUnresolvedReferences,PyUnboundLocalVariable\nclass Attendee(Attendee):\n    full_name: str\n    first_name: str\n    email: EmailStr\n    ticket_reference: str\n    attended_how: str\n    hash: str | None = None\n    uuid: str | None = None\n</code></pre> <p>Example: <code>[preprocess_attendees.py](src%2Fpreprocess_attendees.py)</code></p> <p>Output: <code>list[Attendee]</code></p>"},{"location":"walkthrough/#2-generate-certificates","title":"2. Generate certificates","text":"<p>Input: <code>list[Attendee]</code></p> <p>Steps to generate PDFs:</p> <ol> <li>Design: drawing the generic elements in the PDF.</li> <li>Design: place attendee information</li> <li>Create PDF, set rights (e.g., disallow modifications) and sign digitally.</li> <li>PDFs are saved in the <code>/_certificates/&lt;&lt;event&gt;&gt;</code> directory which is create automatically</li> </ol>"},{"location":"walkthrough/#locations","title":"Locations","text":"what location remarks custom fonts <code>/fonts/&lt;font family name&gt;</code> directory load them before usage graphics <code>/graphics</code> signature files <code>/_signatures</code> make sure to never share/commit <p>Example: <code>[generate_certificates.py](src%2Fgenerate_certificates.py)</code></p> <p>Uses: https://py-pdf.github.io/fpdf2/</p>"},{"location":"walkthrough/#certificate-to-sign-pdfs","title":"Certificate to sign PDFs","text":"<p>Certificates issued need to be trustable and protected against alterations.</p> <p>For protection, the certificates are signed with a PKCS12 certificate.</p>"},{"location":"walkthrough/#best-practice","title":"Best Practice","text":"<p>Use an unique subdomain, e.g. <code>certificates.your-domain.abc</code>. In you do not have a certificate for this domain, yet, create a free certificate for this domain with <code>certbot</code>.</p> <p>See Certbot how to create certificates with certbot. A <code>privateKey</code> and a <code>certificate</code> is created.</p> <p>To create a signature for the signing the PDfs use the following command to create the certificate to sign the PDFs.</p> <pre><code>openssl pkcs12 -export -out YourCertificateToSignPDFs.p12 -inkey privateKey.pem -in certificate.crt\n</code></pre> <p>More options to create certificates are described in this post.</p>"},{"location":"walkthrough/#3-upload-certificates-for-download-and-validation-pages-to-the-conference-website","title":"3. Upload certificates for Download and Validation Pages to the Conference Website","text":"<p>Certificates are accompanied by a JSON that contains all the attendee information.</p> <p>Example: <code>./participation_certificate/valdiation_upload.py</code></p> <p>Generates markdown files that can be added to the static website renderer (PyCon DE uses lektor).</p> <p>PDF files are stored in a static website S3 bucket for download. Upload is done manually :D.</p>"},{"location":"walkthrough/#4-send-emails-to-attendees","title":"4. Send emails to attendees","text":"<p>To share the certificates with the attendees, send them an email with the download link.</p> <p>Example: send_certificates.py</p> <p>Uses the helpdesk.com API to send emails via helpdesk tickets. DEPRECATED: the helpdesk.com API is throttled (ending mass info takes too long) and will be replace in the future.</p>"}]}